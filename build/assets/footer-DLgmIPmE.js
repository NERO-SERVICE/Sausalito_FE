(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const c={cart:"sausalito_cart",wishlist:"sausalito_wishlist",user:"sausalito_user",tokens:"sausalito_tokens"};function O(e,t){try{return JSON.parse(localStorage.getItem(e)||JSON.stringify(t))}catch{return t}}function d(e,t){localStorage.setItem(e,JSON.stringify(t))}const E="http://127.0.0.1:8000/api/v1".replace(/\/$/,"");let f=null;class B extends Error{constructor(t,n=500,s="API_ERROR",r={}){super(t),this.name="ApiError",this.status=n,this.code=s,this.details=r}}function _(){return O(c.tokens,null)}function C(e){d(c.tokens,e)}function y(){d(c.tokens,null)}function P(e,t={}){const n=e.startsWith("/")?e:`/${e}`,s=new URL(`${E}${n}`);return Object.entries(t).forEach(([r,i])=>{i==null||i===""||s.searchParams.set(r,String(i))}),s.toString()}async function x(e){const t=await e.text();if(!t)return null;try{return JSON.parse(t)}catch{return null}}function R(e,t){const n=t?.error||{},s=n.message||t?.message||"요청 처리 중 오류가 발생했습니다.";return new B(s,e,n.code||"API_ERROR",n.details||{})}async function D(){const e=_();return e?.refresh?f||(f=(async()=>{const t=await fetch(P("/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e.refresh})}),n=await x(t);if(!t.ok||n?.success===!1)return y(),d(c.user,null),!1;const s=n?.data||n;return s?.access?(C({access:s.access,refresh:s.refresh||e.refresh}),!0):(y(),d(c.user,null),!1)})().catch(()=>(y(),d(c.user,null),!1)).finally(()=>{f=null}),f):!1}async function o(e,{method:t="GET",query:n={},body:s,auth:r=!0,isForm:i=!1,retryOnAuth:a=!0}={}){const u={},m=_();i||(u["Content-Type"]="application/json"),r&&m?.access&&(u.Authorization=`Bearer ${m.access}`);const h=await fetch(P(e,n),{method:t,headers:u,body:s?i?s:JSON.stringify(s):void 0}),p=await x(h);if(h.status===401&&r&&a&&m?.refresh&&await D())return o(e,{method:t,query:n,body:s,auth:r,isForm:i,retryOnAuth:!1});if(!h.ok||p?.success===!1)throw R(h.status,p);return p?.data!==void 0?p.data:p}function A(e){return e?Array.isArray(e)?e:Array.isArray(e.results)?e.results:[]:[]}function $(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}.${s}.${r}`}function l(e={}){const t=Number(e.rating??e.rating_avg??e.review_summary?.avg??0),n=Number(e.reviews??e.review_count??e.review_summary?.count??0);return{id:e.id,name:e.name||"",oneLine:e.oneLine??e.one_line??"",description:e.description||"",price:Number(e.price||0),originalPrice:Number(e.originalPrice??e.original_price??e.price??0),stock:Number(e.stock||0),badges:Array.isArray(e.badges)?e.badges:[],rating:t,reviews:n,popularScore:Number(e.popularScore??e.popular_score??0),releaseDate:e.releaseDate??e.release_date??"",image:e.image||e.images?.find(s=>s.is_thumbnail)?.url||e.images?.[0]?.url||""}}function z(e={}){return{...l(e),intake:e.intake||"",target:e.target||"",ingredients:Array.isArray(e.ingredients)?e.ingredients:[],cautions:Array.isArray(e.cautions)?e.cautions:[],faq:Array.isArray(e.faq)?e.faq:[],images:Array.isArray(e.images)?e.images.map(n=>n.url).filter(Boolean):[],options:Array.isArray(e.options)?e.options.map(n=>({id:n.id,name:n.name,price:Number(n.price||0),stock:Number(n.stock||0)})):[]}}function L(){return{couponText:"",shippingFee:3e3,freeShippingThreshold:5e4,interestFreeText:"",purchaseTypes:[],subscriptionBenefit:"",optionsLabel:"상품구성",options:[],addOns:[],todayShipText:"",inquiryCount:0,detailImages:[]}}function M(e){return e?{couponText:e.coupon_text||"",shippingFee:Number(e.shipping_fee||3e3),freeShippingThreshold:Number(e.free_shipping_threshold||5e4),interestFreeText:e.interest_free_text||"",purchaseTypes:Array.isArray(e.purchase_types)?e.purchase_types:[],subscriptionBenefit:e.subscription_benefit||"",optionsLabel:e.options_label||"상품구성",options:Array.isArray(e.options)?e.options.map(t=>({id:t.id,name:t.name,price:Number(t.price||0),stock:Number(t.stock||0)})):[],addOns:Array.isArray(e.add_ons)?e.add_ons:[],todayShipText:e.today_ship_text||"",inquiryCount:Number(e.inquiry_count||0),detailImages:Array.isArray(e.detail_images)?e.detail_images:[]}:L()}function g(e={}){const t=Array.isArray(e.images)?e.images.map(s=>typeof s=="string"?s:s&&typeof s=="object"&&s.url||"").filter(Boolean):[],n=e.image||t[0]||"";return{id:e.id,productId:Number(e.productId??e.product_id??e.product?.id??0),user:e.user||e.user_masked||"익명",score:Number(e.score||0),text:e.text||e.content||"",date:e.date||$(e.created_at),helpful:Number(e.helpful??e.helpful_count??0),image:n,images:t,createdAt:e.created_at||null}}function H(e={}){return{id:e.id,orderNo:e.order_no||e.orderNo||"",status:e.status||"",paymentStatus:e.payment_status||e.paymentStatus||"",totalAmount:Number(e.total_amount??e.totalAmount??0),createdAt:e.created_at||e.createdAt||null,recipient:e.recipient||"",itemCount:Array.isArray(e.items)?e.items.length:0,items:Array.isArray(e.items)?e.items:[]}}function S(e={}){return{id:e.id,txType:e.tx_type||e.txType||"",amount:Number(e.amount||0),balanceAfter:Number(e.balance_after??e.balanceAfter??0),description:e.description||"",createdAt:e.created_at||e.createdAt||null}}function F(e={}){return{id:e.id,name:e.name||"",code:e.code||"",discountAmount:Number(e.discount_amount??e.discountAmount??0),minOrderAmount:Number(e.min_order_amount??e.minOrderAmount??0),expiresAt:e.expires_at||e.expiresAt||null,isUsed:!!(e.is_used??e.isUsed),usedAt:e.used_at||e.usedAt||null,isExpired:!!(e.is_expired??e.isExpired),createdAt:e.created_at||e.createdAt||null}}function J(e={}){const t=e.shopping||{},n=e.activity||{},s=t.summary||{};return{shopping:{summary:{orderCount:Number(s.order_count??s.orderCount??0),pointBalance:Number(s.point_balance??s.pointBalance??0),depositBalance:Number(s.deposit_balance??s.depositBalance??0),couponCount:Number(s.coupon_count??s.couponCount??0)},orders:Array.isArray(t.orders)?t.orders.map(H):[],pointHistory:Array.isArray(t.point_history)?t.point_history.map(S):[],depositHistory:Array.isArray(t.deposit_history)?t.deposit_history.map(S):[],couponHistory:Array.isArray(t.coupon_history)?t.coupon_history.map(F):[]},activity:{recentProducts:Array.isArray(n.recent_products)?n.recent_products.map(l):[],wishlistProducts:Array.isArray(n.wishlist_products)?n.wishlist_products.map(l):[],myReviews:Array.isArray(n.my_reviews)?n.my_reviews.map(g):[]},profile:e.profile||null,inquiries:Array.isArray(e.inquiries)?e.inquiries:[]}}function b(e={}){return{id:e.id,orderNo:e.order_no||e.orderNo||"",userEmail:e.user_email||e.userEmail||"",userName:e.user_name||e.userName||"",status:e.status||"",paymentStatus:e.payment_status||e.paymentStatus||"",shippingStatus:e.shipping_status||e.shippingStatus||"",subtotalAmount:Number(e.subtotal_amount??e.subtotalAmount??0),shippingFee:Number(e.shipping_fee??e.shippingFee??0),discountAmount:Number(e.discount_amount??e.discountAmount??0),totalAmount:Number(e.total_amount??e.totalAmount??0),recipient:e.recipient||"",phone:e.phone||"",courierName:e.courier_name||e.courierName||"",trackingNo:e.tracking_no||e.trackingNo||"",invoiceIssuedAt:e.invoice_issued_at||e.invoiceIssuedAt||null,shippedAt:e.shipped_at||e.shippedAt||null,deliveredAt:e.delivered_at||e.deliveredAt||null,createdAt:e.created_at||e.createdAt||null,itemCount:Number(e.item_count??e.itemCount??0)}}function v(e={}){return{id:e.id,userEmail:e.user_email||e.userEmail||"",userName:e.user_name||e.userName||"",title:e.title||"",content:e.content||"",status:e.status||"",answer:e.answer||"",answeredAt:e.answered_at||e.answeredAt||null,createdAt:e.created_at||e.createdAt||null,updatedAt:e.updated_at||e.updatedAt||null}}function N(e={}){return{id:e.id,productId:Number(e.product_id??e.productId??0),productName:e.product_name||e.productName||"",userEmail:e.user_email||e.userEmail||"",userName:e.user_name||e.userName||"",score:Number(e.score||0),title:e.title||"",content:e.content||"",status:e.status||"",helpfulCount:Number(e.helpful_count??e.helpfulCount??0),createdAt:e.created_at||e.createdAt||null,images:Array.isArray(e.images)?e.images.filter(Boolean):[]}}async function T({productId:e,sort:t="latest",hasImage:n,pageSize:s=100}={}){let r=1,i=null;const a=[];for(;r<=100;){const u=await o("/reviews",{query:{product_id:e,sort:t,has_image:typeof n=="boolean"?String(n):void 0,page:r,page_size:s},auth:!1,retryOnAuth:!1}),m=A(u);if(a.push(...m.map(g)),typeof u?.count=="number"&&(i=u.count),!u?.next||i!==null&&a.length>=i)break;r+=1}return a}async function U({email:e,password:t}){return o("/auth/login",{method:"POST",body:{email:e,password:t},auth:!1,retryOnAuth:!1})}async function j({refresh:e}){return o("/auth/logout",{method:"POST",body:{refresh:e}})}async function G(){return o("/users/me")}async function V({q:e,sort:t,minPrice:n,maxPrice:s}={}){const r=await o("/products",{query:{q:e,sort:t,min_price:n,max_price:s,page_size:100},auth:!1,retryOnAuth:!1});return A(r).map(l)}async function X(e){if(!e)return null;const t=await o(`/products/${e}`,{auth:!1,retryOnAuth:!1});return z(t)}async function Z(e){if(!e)return L();const t=await o(`/products/${e}/detail-meta`,{auth:!1,retryOnAuth:!1});return M(t)}async function w(e){return e?T({productId:e,sort:"latest",pageSize:100}):[]}async function ee(){return o("/banners/home",{auth:!1,retryOnAuth:!1})}async function te(e=6){const t=await o("/reviews",{query:{sort:"helpful",page_size:e,page:1},auth:!1,retryOnAuth:!1});return A(t).map(g).slice(0,e)}async function ne(){return T({sort:"latest",pageSize:100})}async function se(){const e=await o("/users/me/dashboard");return J(e)}async function re({name:e,phone:t}){return o("/users/me",{method:"PATCH",body:{name:e,phone:t}})}async function ie({oldPassword:e,newPassword:t,newPasswordConfirm:n}){return o("/users/me/password",{method:"POST",body:{old_password:e,new_password:t,new_password_confirm:n}})}async function oe(){const e=await o("/users/me/wishlist");return Array.isArray(e)?e.map(l):[]}async function ae(e){const t=await o("/users/me/wishlist",{method:"POST",body:{product_id:e}});return l(t||{})}async function ue(e){return o(`/users/me/wishlist/${e}`,{method:"DELETE"})}async function ce(e){return o("/users/me/recent-products",{method:"POST",body:{product_id:e}})}async function de({title:e,content:t}){return o("/users/me/inquiries",{method:"POST",body:{title:e,content:t}})}async function le(){const e=await o("/admin/dashboard"),t=e?.summary||{};return{summary:{totalOrders:Number(t.total_orders??t.totalOrders??0),paidOrders:Number(t.paid_orders??t.paidOrders??0),totalOrderAmount:Number(t.total_order_amount??t.totalOrderAmount??0),totalPaidAmount:Number(t.total_paid_amount??t.totalPaidAmount??0),todayPaidAmount:Number(t.today_paid_amount??t.todayPaidAmount??0),shippingPendingCount:Number(t.shipping_pending_count??t.shippingPendingCount??0),shippingShippedCount:Number(t.shipping_shipped_count??t.shippingShippedCount??0),shippingDeliveredCount:Number(t.shipping_delivered_count??t.shippingDeliveredCount??0),openInquiryCount:Number(t.open_inquiry_count??t.openInquiryCount??0),hiddenReviewCount:Number(t.hidden_review_count??t.hiddenReviewCount??0)},recentOrders:Array.isArray(e?.recent_orders)?e.recent_orders.map(b):[],recentInquiries:Array.isArray(e?.recent_inquiries)?e.recent_inquiries.map(v):[],recentReviews:Array.isArray(e?.recent_reviews)?e.recent_reviews.map(N):[]}}async function me({q:e,status:t,paymentStatus:n,shippingStatus:s,limit:r=80}={}){const i=await o("/admin/orders",{query:{q:e,status:t,payment_status:n,shipping_status:s,limit:r}});return Array.isArray(i)?i.map(b):[]}async function pe(e,t={}){const n={};t.status!==void 0&&(n.status=t.status),t.paymentStatus!==void 0&&(n.payment_status=t.paymentStatus),t.shippingStatus!==void 0&&(n.shipping_status=t.shippingStatus),t.courierName!==void 0&&(n.courier_name=t.courierName),t.trackingNo!==void 0&&(n.tracking_no=t.trackingNo),t.issueInvoice!==void 0&&(n.issue_invoice=t.issueInvoice),t.markDelivered!==void 0&&(n.mark_delivered=t.markDelivered);const s=await o(`/admin/orders/${e}`,{method:"PATCH",body:n});return b(s||{})}async function fe({status:e}={}){const t=await o("/admin/inquiries",{query:{status:e}});return Array.isArray(t)?t.map(v):[]}async function he(e,{answer:t,status:n}={}){const s=await o(`/admin/inquiries/${e}/answer`,{method:"PATCH",body:{answer:t,status:n}});return v(s||{})}async function ye({status:e,productId:t}={}){const n=await o("/admin/reviews",{query:{status:e,product_id:t}});return Array.isArray(n)?n.map(N):[]}async function ge(e,t){const n=await o(`/admin/reviews/${e}/visibility`,{method:"PATCH",body:{visible:!!t}});return N(n||{})}async function _e({q:e,isUsed:t}={}){const n=await o("/admin/coupons",{query:{q:e,is_used:typeof t=="boolean"?String(t):void 0}});return Array.isArray(n)?n.map(s=>({id:s.id,userEmail:s.user_email||s.userEmail||"",name:s.name||"",code:s.code||"",discountAmount:Number(s.discount_amount??s.discountAmount??0),minOrderAmount:Number(s.min_order_amount??s.minOrderAmount??0),expiresAt:s.expires_at||s.expiresAt||null,isUsed:!!(s.is_used??s.isUsed),usedAt:s.used_at||s.usedAt||null,isExpired:!!(s.is_expired??s.isExpired),createdAt:s.created_at||s.createdAt||null})):[]}async function Ae({target:e,email:t,name:n,code:s,discountAmount:r,minOrderAmount:i,expiresAt:a}){return o("/admin/coupons",{method:"POST",body:{target:e,email:t,name:n,code:s,discount_amount:r,min_order_amount:i,expires_at:a||null}})}async function be({productId:e,score:t,title:n,content:s,images:r=[]}){const i=new FormData;i.append("product_id",String(e)),i.append("score",String(t)),i.append("title",n||""),i.append("content",s||""),r.forEach(u=>{i.append("images",u)});const a=await o("/reviews",{method:"POST",body:i,isForm:!0});return g(a)}function ve(){return O(c.user,null)}function q(){return _()}function W(){return!!q()?.access}async function Ne({email:e,password:t}){const n=await U({email:e,password:t}),s=n?.tokens||null,r=n?.user||null;return C(s),d(c.user,r),r}async function K(){const e=q()?.refresh;try{e&&await j({refresh:e})}catch{}I()}function I(){y(),d(c.user,null)}async function Se(){if(!W())return null;try{const e=await G();return d(c.user,e),e}catch{return I(),null}}const Y="../dist/assets/logo/main_logo.svg",k=["/dist/assets/logo/main_logo.svg","dist/assets/logo/main_logo.svg"];function ke({showCart:e=!0,currentNav:t=""}={}){const n=document.getElementById("siteHeaderMount");if(!n)return{accountLink:null,adminLink:null,logoutBtn:null,cartCount:null};n.innerHTML=`
    <header class="site-header">
      <div class="site-header-top">
        <a class="brand" href="/pages/home.html">
          <img src="${Y}" alt="소살리토" class="brand-logo" />
          <div>
            <h1>소살리토</h1>
            <p>러너를 위한 웰니스 브랜드</p>
          </div>
        </a>
        <div class="header-actions">
          <div class="header-account">
            <a class="text-btn" href="/pages/login.html" id="accountLink">로그인</a>
            <a class="text-btn" href="/pages/admin.html" id="adminLink" hidden>관리자</a>
            <button class="icon-btn header-logout-btn" id="logoutBtn" type="button" hidden>로그아웃</button>
          </div>
          ${e?`<a class="icon-btn cart-link" href="/pages/cart.html" aria-label="장바구니">
                   <svg class="cart-svg" viewBox="0 0 24 24" aria-hidden="true">
                     <path d="M3 4h2l2.4 10.2a1 1 0 0 0 1 .8h8.9a1 1 0 0 0 1-.8L20 7H7" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                     <circle cx="10" cy="19" r="1.6" fill="currentColor"/>
                     <circle cx="17" cy="19" r="1.6" fill="currentColor"/>
                   </svg>
                   <span class="cart-link-label">장바구니</span>
                   <span class="count" id="cartCount">0</span>
                 </a>`:""}
        </div>
      </div>
      <div class="site-anchor-nav-wrap">
        <nav class="site-anchor-nav">
          <a href="/pages/home.html" class="${t==="home"?"active":""}">홈</a>
          <a href="/pages/brand.html" class="${t==="brand"?"active":""}">브랜드</a>
          <a href="/pages/shop.html" class="${t==="shop"?"active":""}">쇼핑</a>
          <a href="/pages/reviews.html" class="${t==="review"?"active":""}">리뷰</a>
        </nav>
      </div>
    </header>
  `;const s=n.querySelector(".brand-logo");if(s){let i=0;s.addEventListener("error",()=>{i>=k.length||(s.src=k[i],i+=1)})}const r=n.querySelector("#logoutBtn");return r&&r.addEventListener("click",async()=>{try{await K()}catch(i){console.error(i)}finally{location.href="/pages/home.html"}}),{accountLink:n.querySelector("#accountLink"),adminLink:n.querySelector("#adminLink"),logoutBtn:r,cartCount:n.querySelector("#cartCount")}}function Oe(e,{userName:t=null,isAdmin:n=!1,cartCountValue:s=null}={}){e.accountLink&&(t?(e.accountLink.textContent="마이페이지",e.accountLink.href="/pages/mypage.html"):(e.accountLink.textContent="로그인",e.accountLink.href="/pages/login.html")),e.adminLink&&(e.adminLink.hidden=!t||!n),e.logoutBtn&&(e.logoutBtn.hidden=!t),e.cartCount&&typeof s=="number"&&(e.cartCount.textContent=s)}function Ce(){const e=document.getElementById("siteFooterMount");e&&(e.innerHTML=`
    <footer class="site-footer">
      <div class="site-footer-inner">
        <nav class="site-footer-links">
          <a href="/pages/privacy.html">개인정보처리방침</a>
          <a href="/pages/terms.html">이용약관</a>
          <a href="/pages/guide.html">이용안내</a>
        </nav>
        <div class="site-footer-info">
          <p><strong>상호</strong> 주식회사 네로</p>
          <p><strong>대표</strong> 한동균, 박호연</p>
          <p><strong>사업자등록번호</strong> 123-45-67890</p>
          <p><strong>통신판매업신고</strong> 2026-서울마포-0001</p>
          <p><strong>주소</strong> 서울특별시 중구 퇴계로36길 2</p>
          <p><strong>고객센터</strong> 1588-1234 (평일 10:00 - 18:00 / 점심 12:30 - 13:30)</p>
          <p><strong>이메일</strong> cs@nero.ai.kr</p>
        </div>
        <p class="site-footer-copy">Copyright © Nero Inc. All rights reserved.</p>
      </div>
    </footer>
  `)}export{ye as A,pe as B,he as C,ge as D,le as E,_e as F,W as G,o as H,Ce as a,ee as b,te as c,Oe as d,ne as e,V as f,ve as g,be as h,ae as i,X as j,Z as k,w as l,ke as m,oe as n,Ne as o,ie as p,K as q,ue as r,Se as s,ce as t,re as u,de as v,se as w,Ae as x,me as y,fe as z};
