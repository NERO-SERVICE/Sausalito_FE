(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const u={cart:"sausalito_cart",wishlist:"sausalito_wishlist",user:"sausalito_user",tokens:"sausalito_tokens"};function S(e,t){try{return JSON.parse(localStorage.getItem(e)||JSON.stringify(t))}catch{return t}}function l(e,t){localStorage.setItem(e,JSON.stringify(t))}const B="http://127.0.0.1:8000/api/v1".replace(/\/$/,"");let m=null;class C extends Error{constructor(t,r=500,n="API_ERROR",s={}){super(t),this.name="ApiError",this.status=r,this.code=n,this.details=s}}function A(){return S(u.tokens,null)}function k(e){l(u.tokens,e)}function h(){l(u.tokens,null)}function O(e,t={}){const r=e.startsWith("/")?e:`/${e}`,n=new URL(`${B}${r}`);return Object.entries(t).forEach(([s,o])=>{o==null||o===""||n.searchParams.set(s,String(o))}),n.toString()}async function N(e){const t=await e.text();if(!t)return null;try{return JSON.parse(t)}catch{return null}}function I(e,t){const r=t?.error||{},n=r.message||t?.message||"요청 처리 중 오류가 발생했습니다.";return new C(n,e,r.code||"API_ERROR",r.details||{})}async function E(){const e=A();return e?.refresh?m||(m=(async()=>{const t=await fetch(O("/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e.refresh})}),r=await N(t);if(!t.ok||r?.success===!1)return h(),l(u.user,null),!1;const n=r?.data||r;return n?.access?(k({access:n.access,refresh:n.refresh||e.refresh}),!0):(h(),l(u.user,null),!1)})().catch(()=>(h(),l(u.user,null),!1)).finally(()=>{m=null}),m):!1}async function i(e,{method:t="GET",query:r={},body:n,auth:s=!0,isForm:o=!1,retryOnAuth:a=!0}={}){const c={},p=A();o||(c["Content-Type"]="application/json"),s&&p?.access&&(c.Authorization=`Bearer ${p.access}`);const y=await fetch(O(e,r),{method:t,headers:c,body:n?o?n:JSON.stringify(n):void 0}),f=await N(y);if(y.status===401&&s&&a&&p?.refresh&&await E())return i(e,{method:t,query:r,body:n,auth:s,isForm:o,retryOnAuth:!1});if(!y.ok||f?.success===!1)throw I(y.status,f);return f?.data!==void 0?f.data:f}function _(e){return e?Array.isArray(e)?e:Array.isArray(e.results)?e.results:[]:[]}function q(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const r=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${r}.${n}.${s}`}function d(e={}){const t=Number(e.rating??e.rating_avg??e.review_summary?.avg??0),r=Number(e.reviews??e.review_count??e.review_summary?.count??0);return{id:e.id,name:e.name||"",oneLine:e.oneLine??e.one_line??"",description:e.description||"",price:Number(e.price||0),originalPrice:Number(e.originalPrice??e.original_price??e.price??0),stock:Number(e.stock||0),badges:Array.isArray(e.badges)?e.badges:[],rating:t,reviews:r,popularScore:Number(e.popularScore??e.popular_score??0),releaseDate:e.releaseDate??e.release_date??"",image:e.image||e.images?.find(n=>n.is_thumbnail)?.url||e.images?.[0]?.url||""}}function R(e={}){return{...d(e),intake:e.intake||"",target:e.target||"",ingredients:Array.isArray(e.ingredients)?e.ingredients:[],cautions:Array.isArray(e.cautions)?e.cautions:[],faq:Array.isArray(e.faq)?e.faq:[],images:Array.isArray(e.images)?e.images.map(r=>r.url).filter(Boolean):[],options:Array.isArray(e.options)?e.options.map(r=>({id:r.id,name:r.name,price:Number(r.price||0),stock:Number(r.stock||0)})):[]}}function x(){return{couponText:"",shippingFee:3e3,freeShippingThreshold:5e4,interestFreeText:"",purchaseTypes:[],subscriptionBenefit:"",optionsLabel:"상품구성",options:[],addOns:[],todayShipText:"",inquiryCount:0,detailImages:[]}}function M(e){return e?{couponText:e.coupon_text||"",shippingFee:Number(e.shipping_fee||3e3),freeShippingThreshold:Number(e.free_shipping_threshold||5e4),interestFreeText:e.interest_free_text||"",purchaseTypes:Array.isArray(e.purchase_types)?e.purchase_types:[],subscriptionBenefit:e.subscription_benefit||"",optionsLabel:e.options_label||"상품구성",options:Array.isArray(e.options)?e.options.map(t=>({id:t.id,name:t.name,price:Number(t.price||0),stock:Number(t.stock||0)})):[],addOns:Array.isArray(e.add_ons)?e.add_ons:[],todayShipText:e.today_ship_text||"",inquiryCount:Number(e.inquiry_count||0),detailImages:Array.isArray(e.detail_images)?e.detail_images:[]}:x()}function g(e={}){const t=Array.isArray(e.images)?e.images.map(n=>typeof n=="string"?n:n&&typeof n=="object"&&n.url||"").filter(Boolean):[],r=e.image||t[0]||"";return{id:e.id,productId:Number(e.productId??e.product_id??e.product?.id??0),user:e.user||e.user_masked||"익명",score:Number(e.score||0),text:e.text||e.content||"",date:e.date||q(e.created_at),helpful:Number(e.helpful??e.helpful_count??0),image:r,images:t,createdAt:e.created_at||null}}function $(e={}){return{id:e.id,orderNo:e.order_no||e.orderNo||"",status:e.status||"",paymentStatus:e.payment_status||e.paymentStatus||"",totalAmount:Number(e.total_amount??e.totalAmount??0),createdAt:e.created_at||e.createdAt||null,recipient:e.recipient||"",itemCount:Array.isArray(e.items)?e.items.length:0,items:Array.isArray(e.items)?e.items:[]}}function b(e={}){return{id:e.id,txType:e.tx_type||e.txType||"",amount:Number(e.amount||0),balanceAfter:Number(e.balance_after??e.balanceAfter??0),description:e.description||"",createdAt:e.created_at||e.createdAt||null}}function z(e={}){return{id:e.id,name:e.name||"",code:e.code||"",discountAmount:Number(e.discount_amount??e.discountAmount??0),minOrderAmount:Number(e.min_order_amount??e.minOrderAmount??0),expiresAt:e.expires_at||e.expiresAt||null,isUsed:!!(e.is_used??e.isUsed),usedAt:e.used_at||e.usedAt||null,isExpired:!!(e.is_expired??e.isExpired),createdAt:e.created_at||e.createdAt||null}}function D(e={}){const t=e.shopping||{},r=e.activity||{},n=t.summary||{};return{shopping:{summary:{orderCount:Number(n.order_count??n.orderCount??0),pointBalance:Number(n.point_balance??n.pointBalance??0),depositBalance:Number(n.deposit_balance??n.depositBalance??0),couponCount:Number(n.coupon_count??n.couponCount??0)},orders:Array.isArray(t.orders)?t.orders.map($):[],pointHistory:Array.isArray(t.point_history)?t.point_history.map(b):[],depositHistory:Array.isArray(t.deposit_history)?t.deposit_history.map(b):[],couponHistory:Array.isArray(t.coupon_history)?t.coupon_history.map(z):[]},activity:{recentProducts:Array.isArray(r.recent_products)?r.recent_products.map(d):[],wishlistProducts:Array.isArray(r.wishlist_products)?r.wishlist_products.map(d):[],myReviews:Array.isArray(r.my_reviews)?r.my_reviews.map(g):[]},profile:e.profile||null,inquiries:Array.isArray(e.inquiries)?e.inquiries:[]}}async function P({productId:e,sort:t="latest",hasImage:r,pageSize:n=100}={}){let s=1,o=null;const a=[];for(;s<=100;){const c=await i("/reviews",{query:{product_id:e,sort:t,has_image:typeof r=="boolean"?String(r):void 0,page:s,page_size:n},auth:!1,retryOnAuth:!1}),p=_(c);if(a.push(...p.map(g)),typeof c?.count=="number"&&(o=c.count),!c?.next||o!==null&&a.length>=o)break;s+=1}return a}async function H({email:e,password:t}){return i("/auth/login",{method:"POST",body:{email:e,password:t},auth:!1,retryOnAuth:!1})}async function F({refresh:e}){return i("/auth/logout",{method:"POST",body:{refresh:e}})}async function J(){return i("/users/me")}async function K({q:e,sort:t,minPrice:r,maxPrice:n}={}){const s=await i("/products",{query:{q:e,sort:t,min_price:r,max_price:n,page_size:100},auth:!1,retryOnAuth:!1});return _(s).map(d)}async function Y(e){if(!e)return null;const t=await i(`/products/${e}`,{auth:!1,retryOnAuth:!1});return R(t)}async function Q(e){if(!e)return x();const t=await i(`/products/${e}/detail-meta`,{auth:!1,retryOnAuth:!1});return M(t)}async function X(e){return e?P({productId:e,sort:"latest",pageSize:100}):[]}async function Z(){return i("/banners/home",{auth:!1,retryOnAuth:!1})}async function V(e=6){const t=await i("/reviews",{query:{sort:"helpful",page_size:e,page:1},auth:!1,retryOnAuth:!1});return _(t).map(g).slice(0,e)}async function w(){return P({sort:"latest",pageSize:100})}async function ee(){const e=await i("/users/me/dashboard");return D(e)}async function te({name:e,phone:t}){return i("/users/me",{method:"PATCH",body:{name:e,phone:t}})}async function re({oldPassword:e,newPassword:t,newPasswordConfirm:r}){return i("/users/me/password",{method:"POST",body:{old_password:e,new_password:t,new_password_confirm:r}})}async function ne(){const e=await i("/users/me/wishlist");return Array.isArray(e)?e.map(d):[]}async function se(e){const t=await i("/users/me/wishlist",{method:"POST",body:{product_id:e}});return d(t||{})}async function oe(e){return i(`/users/me/wishlist/${e}`,{method:"DELETE"})}async function ie(e){return i("/users/me/recent-products",{method:"POST",body:{product_id:e}})}async function ae({title:e,content:t}){return i("/users/me/inquiries",{method:"POST",body:{title:e,content:t}})}async function ce({productId:e,score:t,title:r,content:n,images:s=[]}){const o=new FormData;o.append("product_id",String(e)),o.append("score",String(t)),o.append("title",r||""),o.append("content",n||""),s.forEach(c=>{o.append("images",c)});const a=await i("/reviews",{method:"POST",body:o,isForm:!0});return g(a)}function ue(){return S(u.user,null)}function T(){return A()}function U(){return!!T()?.access}async function le({email:e,password:t}){const r=await H({email:e,password:t}),n=r?.tokens||null,s=r?.user||null;return k(n),l(u.user,s),s}async function j(){const e=T()?.refresh;try{e&&await F({refresh:e})}catch{}L()}function L(){h(),l(u.user,null)}async function de(){if(!U())return null;try{const e=await J();return l(u.user,e),e}catch{return L(),null}}const W="../dist/assets/logo/main_logo.svg",v=["/dist/assets/logo/main_logo.svg","dist/assets/logo/main_logo.svg"];function pe({showCart:e=!0,currentNav:t=""}={}){const r=document.getElementById("siteHeaderMount");if(!r)return{accountLink:null,logoutBtn:null,cartCount:null};r.innerHTML=`
    <header class="site-header">
      <div class="site-header-top">
        <a class="brand" href="/pages/home.html">
          <img src="${W}" alt="소살리토" class="brand-logo" />
          <div>
            <h1>소살리토</h1>
            <p>러너를 위한 웰니스 브랜드</p>
          </div>
        </a>
        <div class="header-actions">
          <div class="header-account">
            <a class="text-btn" href="/pages/login.html" id="accountLink">로그인</a>
            <button class="icon-btn header-logout-btn" id="logoutBtn" type="button" hidden>로그아웃</button>
          </div>
          ${e?`<a class="icon-btn cart-link" href="/pages/cart.html" aria-label="장바구니">
                   <svg class="cart-svg" viewBox="0 0 24 24" aria-hidden="true">
                     <path d="M3 4h2l2.4 10.2a1 1 0 0 0 1 .8h8.9a1 1 0 0 0 1-.8L20 7H7" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                     <circle cx="10" cy="19" r="1.6" fill="currentColor"/>
                     <circle cx="17" cy="19" r="1.6" fill="currentColor"/>
                   </svg>
                   <span class="cart-link-label">장바구니</span>
                   <span class="count" id="cartCount">0</span>
                 </a>`:""}
        </div>
      </div>
      <div class="site-anchor-nav-wrap">
        <nav class="site-anchor-nav">
          <a href="/pages/home.html" class="${t==="home"?"active":""}">홈</a>
          <a href="/pages/brand.html" class="${t==="brand"?"active":""}">브랜드</a>
          <a href="/pages/shop.html" class="${t==="shop"?"active":""}">쇼핑</a>
          <a href="/pages/reviews.html" class="${t==="review"?"active":""}">리뷰</a>
        </nav>
      </div>
    </header>
  `;const n=r.querySelector(".brand-logo");if(n){let o=0;n.addEventListener("error",()=>{o>=v.length||(n.src=v[o],o+=1)})}const s=r.querySelector("#logoutBtn");return s&&s.addEventListener("click",async()=>{try{await j()}catch(o){console.error(o)}finally{location.href="/pages/home.html"}}),{accountLink:r.querySelector("#accountLink"),logoutBtn:s,cartCount:r.querySelector("#cartCount")}}function fe(e,{userName:t=null,cartCountValue:r=null}={}){e.accountLink&&(t?(e.accountLink.textContent="마이페이지",e.accountLink.href="/pages/mypage.html"):(e.accountLink.textContent="로그인",e.accountLink.href="/pages/login.html")),e.logoutBtn&&(e.logoutBtn.hidden=!t),e.cartCount&&typeof r=="number"&&(e.cartCount.textContent=r)}function me(){const e=document.getElementById("siteFooterMount");e&&(e.innerHTML=`
    <footer class="site-footer">
      <div class="site-footer-inner">
        <nav class="site-footer-links">
          <a href="/pages/privacy.html">개인정보처리방침</a>
          <a href="/pages/terms.html">이용약관</a>
          <a href="/pages/guide.html">이용안내</a>
        </nav>
        <div class="site-footer-info">
          <p><strong>상호</strong> 주식회사 네로</p>
          <p><strong>대표</strong> 한동균, 박호연</p>
          <p><strong>사업자등록번호</strong> 123-45-67890</p>
          <p><strong>통신판매업신고</strong> 2026-서울마포-0001</p>
          <p><strong>주소</strong> 서울특별시 중구 퇴계로36길 2</p>
          <p><strong>고객센터</strong> 1588-1234 (평일 10:00 - 18:00 / 점심 12:30 - 13:30)</p>
          <p><strong>이메일</strong> cs@nero.ai.kr</p>
        </div>
        <p class="site-footer-copy">Copyright © Nero Inc. All rights reserved.</p>
      </div>
    </footer>
  `)}export{me as a,Z as b,V as c,fe as d,w as e,K as f,ue as g,ce as h,se as i,Y as j,Q as k,X as l,pe as m,ne as n,le as o,re as p,j as q,oe as r,de as s,ie as t,te as u,ae as v,ee as w,U as x,i as y};
