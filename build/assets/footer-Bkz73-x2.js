(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const l={cart:"sausalito_cart",wishlist:"sausalito_wishlist",user:"sausalito_user",tokens:"sausalito_tokens"};function x(e,t){try{return JSON.parse(localStorage.getItem(e)||JSON.stringify(t))}catch{return t}}function d(e,t){localStorage.setItem(e,JSON.stringify(t))}const R="http://127.0.0.1:8000/api/v1".replace(/\/$/,"");let h=null;class D extends Error{constructor(t,n=500,o="API_ERROR",r={}){super(t),this.name="ApiError",this.status=n,this.code=o,this.details=r}}function b(){return x(l.tokens,null)}function N(e){d(l.tokens,e)}function y(){d(l.tokens,null)}function C(e,t={}){const n=e.startsWith("/")?e:`/${e}`,o=new URL(`${R}${n}`);return Object.entries(t).forEach(([r,s])=>{s==null||s===""||o.searchParams.set(r,String(s))}),o.toString()}async function S(e){const t=await e.text();if(!t)return null;try{return JSON.parse(t)}catch{return null}}function E(e,t){const n=t?.error||{},o=n.message||t?.message||"요청 처리 중 오류가 발생했습니다.";return new D(o,e,n.code||"API_ERROR",n.details||{})}async function T(){const e=b();return e?.refresh?h||(h=(async()=>{const t=await fetch(C("/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e.refresh})}),n=await S(t);if(!t.ok||n?.success===!1)return y(),d(l.user,null),!1;const o=n?.data||n;return o?.access?(N({access:o.access,refresh:o.refresh||e.refresh}),!0):(y(),d(l.user,null),!1)})().catch(()=>(y(),d(l.user,null),!1)).finally(()=>{h=null}),h):!1}async function u(e,{method:t="GET",query:n={},body:o,auth:r=!0,isForm:s=!1,retryOnAuth:c=!0}={}){const i={},p=b();s||(i["Content-Type"]="application/json"),r&&p?.access&&(i.Authorization=`Bearer ${p.access}`);const a=await fetch(C(e,n),{method:t,headers:i,body:o?s?o:JSON.stringify(o):void 0}),f=await S(a);if(a.status===401&&r&&c&&p?.refresh&&await T())return u(e,{method:t,query:n,body:o,auth:r,isForm:s,retryOnAuth:!1});if(!a.ok||f?.success===!1)throw E(a.status,f);return f?.data!==void 0?f.data:f}function _(e){return e?Array.isArray(e)?e:Array.isArray(e.results)?e.results:[]:[]}function L(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}.${o}.${r}`}function m(e={}){const t=Number(e.rating??e.rating_avg??e.review_summary?.avg??0),n=Number(e.reviews??e.review_count??e.review_summary?.count??0);return{id:e.id,name:e.name||"",oneLine:e.oneLine??e.one_line??"",description:e.description||"",price:Number(e.price||0),originalPrice:Number(e.originalPrice??e.original_price??e.price??0),stock:Number(e.stock||0),badges:Array.isArray(e.badges)?e.badges:[],rating:t,reviews:n,popularScore:Number(e.popularScore??e.popular_score??0),releaseDate:e.releaseDate??e.release_date??"",image:e.image||e.images?.find(o=>o.is_thumbnail)?.url||e.images?.[0]?.url||""}}function q(e={}){const t=m(e);return{...t,intake:e.intake||"",target:e.target||"",ingredients:Array.isArray(e.ingredients)?e.ingredients:[],cautions:Array.isArray(e.cautions)?e.cautions:[],faq:Array.isArray(e.faq)?e.faq:[],images:Array.isArray(e.images)?e.images.map(n=>n.url).filter(Boolean):[],options:Array.isArray(e.options)?e.options.map(n=>({id:n.id,name:n.name,price:Number(n.price||0),stock:Number(n.stock||0)})):[],couponBenefit:I(e.coupon_benefit||e.couponBenefit||null,t)}}function I(e,t={}){const n=Number(t.price||0),o=Number(t.originalPrice||n||0),r=o>0?Math.max(0,Number(((1-n/o)*100).toFixed(2))):0,s={isAuthenticated:!1,hasAvailableCoupon:!1,hasEligibleCoupon:!1,availableCouponCount:0,eligibleCouponCount:0,soonExpiringCouponCount:0,basePrice:n,baseOriginalPrice:o,baseDiscountRate:r,maxExtraDiscountRate:0,maxFinalDiscountRate:r,priceAfterBestCoupon:n,marketingCopy:"로그인하면 보유 쿠폰 기반 추가 할인 혜택을 확인할 수 있어요.",bestCoupon:null,couponItems:[]};if(!e||typeof e!="object")return s;const c=Array.isArray(e.coupon_items)?e.coupon_items.map(a=>({id:Number(a.id||0),name:a.name||"",code:a.code||"",discountAmount:Number(a.discount_amount??a.discountAmount??0),minOrderAmount:Number(a.min_order_amount??a.minOrderAmount??0),expiresAt:a.expires_at||a.expiresAt||null,isEligible:!!(a.is_eligible??a.isEligible),requiredAmount:Number(a.required_amount??a.requiredAmount??0),appliedDiscountAmount:Number(a.applied_discount_amount??a.appliedDiscountAmount??0),finalPrice:Number(a.final_price??a.finalPrice??n),extraDiscountRate:Number(a.extra_discount_rate??a.extraDiscountRate??0),finalDiscountRate:Number(a.final_discount_rate??a.finalDiscountRate??r)})):[],i=e.best_coupon||e.bestCoupon,p=i?{id:Number(i.id||0),name:i.name||"",code:i.code||"",discountAmount:Number(i.discount_amount??i.discountAmount??0),minOrderAmount:Number(i.min_order_amount??i.minOrderAmount??0),expiresAt:i.expires_at||i.expiresAt||null,isEligible:!!(i.is_eligible??i.isEligible),requiredAmount:Number(i.required_amount??i.requiredAmount??0),appliedDiscountAmount:Number(i.applied_discount_amount??i.appliedDiscountAmount??0),finalPrice:Number(i.final_price??i.finalPrice??n),extraDiscountRate:Number(i.extra_discount_rate??i.extraDiscountRate??0),finalDiscountRate:Number(i.final_discount_rate??i.finalDiscountRate??r)}:null;return{isAuthenticated:!!(e.is_authenticated??e.isAuthenticated),hasAvailableCoupon:!!(e.has_available_coupon??e.hasAvailableCoupon),hasEligibleCoupon:!!(e.has_eligible_coupon??e.hasEligibleCoupon),availableCouponCount:Number(e.available_coupon_count??e.availableCouponCount??c.length),eligibleCouponCount:Number(e.eligible_coupon_count??e.eligibleCouponCount??0),soonExpiringCouponCount:Number(e.soon_expiring_coupon_count??e.soonExpiringCouponCount??0),basePrice:Number(e.base_price??e.basePrice??n),baseOriginalPrice:Number(e.base_original_price??e.baseOriginalPrice??o),baseDiscountRate:Number(e.base_discount_rate??e.baseDiscountRate??r),maxExtraDiscountRate:Number(e.max_extra_discount_rate??e.maxExtraDiscountRate??0),maxFinalDiscountRate:Number(e.max_final_discount_rate??e.maxFinalDiscountRate??r),priceAfterBestCoupon:Number(e.price_after_best_coupon??e.priceAfterBestCoupon??n),marketingCopy:e.marketing_copy||e.marketingCopy||s.marketingCopy,bestCoupon:p,couponItems:c}}function k(){return{couponText:"",shippingFee:3e3,freeShippingThreshold:5e4,interestFreeText:"",purchaseTypes:[],subscriptionBenefit:"",optionsLabel:"상품구성",options:[],addOns:[],todayShipText:"",inquiryCount:0,detailImages:[]}}function M(e){return e?{couponText:e.coupon_text||"",shippingFee:Number(e.shipping_fee||3e3),freeShippingThreshold:Number(e.free_shipping_threshold||5e4),interestFreeText:e.interest_free_text||"",purchaseTypes:Array.isArray(e.purchase_types)?e.purchase_types:[],subscriptionBenefit:e.subscription_benefit||"",optionsLabel:e.options_label||"상품구성",options:Array.isArray(e.options)?e.options.map(t=>({id:t.id,name:t.name,price:Number(t.price||0),stock:Number(t.stock||0)})):[],addOns:Array.isArray(e.add_ons)?e.add_ons:[],todayShipText:e.today_ship_text||"",inquiryCount:Number(e.inquiry_count||0),detailImages:Array.isArray(e.detail_images)?e.detail_images:[]}:k()}function g(e={}){const t=Array.isArray(e.images)?e.images.map(o=>typeof o=="string"?o:o&&typeof o=="object"&&o.url||"").filter(Boolean):[],n=e.image||t[0]||"";return{id:e.id,productId:Number(e.productId??e.product_id??e.product?.id??0),user:e.user||e.user_masked||"익명",score:Number(e.score||0),text:e.text||e.content||"",date:e.date||L(e.created_at),helpful:Number(e.helpful??e.helpful_count??0),image:n,images:t,createdAt:e.created_at||null}}function $(e={}){return{id:e.id,orderNo:e.order_no||e.orderNo||"",status:e.status||"",paymentStatus:e.payment_status||e.paymentStatus||"",totalAmount:Number(e.total_amount??e.totalAmount??0),createdAt:e.created_at||e.createdAt||null,recipient:e.recipient||"",itemCount:Array.isArray(e.items)?e.items.length:0,items:Array.isArray(e.items)?e.items:[]}}function A(e={}){return{id:e.id,txType:e.tx_type||e.txType||"",amount:Number(e.amount||0),balanceAfter:Number(e.balance_after??e.balanceAfter??0),description:e.description||"",createdAt:e.created_at||e.createdAt||null}}function z(e={}){return{id:e.id,name:e.name||"",code:e.code||"",discountAmount:Number(e.discount_amount??e.discountAmount??0),minOrderAmount:Number(e.min_order_amount??e.minOrderAmount??0),expiresAt:e.expires_at||e.expiresAt||null,isUsed:!!(e.is_used??e.isUsed),usedAt:e.used_at||e.usedAt||null,isExpired:!!(e.is_expired??e.isExpired),createdAt:e.created_at||e.createdAt||null}}function F(e={}){const t=e.shopping||{},n=e.activity||{},o=t.summary||{};return{shopping:{summary:{orderCount:Number(o.order_count??o.orderCount??0),pointBalance:Number(o.point_balance??o.pointBalance??0),depositBalance:Number(o.deposit_balance??o.depositBalance??0),couponCount:Number(o.coupon_count??o.couponCount??0)},orders:Array.isArray(t.orders)?t.orders.map($):[],pointHistory:Array.isArray(t.point_history)?t.point_history.map(A):[],depositHistory:Array.isArray(t.deposit_history)?t.deposit_history.map(A):[],couponHistory:Array.isArray(t.coupon_history)?t.coupon_history.map(z):[]},activity:{recentProducts:Array.isArray(n.recent_products)?n.recent_products.map(m):[],wishlistProducts:Array.isArray(n.wishlist_products)?n.wishlist_products.map(m):[],myReviews:Array.isArray(n.my_reviews)?n.my_reviews.map(g):[]},profile:e.profile||null,inquiries:Array.isArray(e.inquiries)?e.inquiries:[]}}async function O({productId:e,sort:t="latest",hasImage:n,pageSize:o=100}={}){let r=1,s=null;const c=[];for(;r<=100;){const i=await u("/reviews",{query:{product_id:e,sort:t,has_image:typeof n=="boolean"?String(n):void 0,page:r,page_size:o},auth:!1,retryOnAuth:!1}),p=_(i);if(c.push(...p.map(g)),typeof i?.count=="number"&&(s=i.count),!i?.next||s!==null&&c.length>=s)break;r+=1}return c}async function H({email:e,password:t}){return u("/auth/login",{method:"POST",body:{email:e,password:t},auth:!1,retryOnAuth:!1})}async function J({refresh:e}){return u("/auth/logout",{method:"POST",body:{refresh:e}})}async function j(){return u("/users/me")}async function Y({q:e,sort:t,minPrice:n,maxPrice:o}={}){const r=await u("/products",{query:{q:e,sort:t,min_price:n,max_price:o,page_size:100},auth:!1,retryOnAuth:!1});return _(r).map(m)}async function Q(e){if(!e)return null;const t=await u(`/products/${e}`);return q(t)}async function X(e){if(!e)return k();const t=await u(`/products/${e}/detail-meta`,{auth:!1,retryOnAuth:!1});return M(t)}async function Z(e){return e?O({productId:e,sort:"latest",pageSize:100}):[]}async function V(){return u("/banners/home",{auth:!1,retryOnAuth:!1})}async function w(e=6){const t=await u("/reviews",{query:{sort:"helpful",page_size:e,page:1},auth:!1,retryOnAuth:!1});return _(t).map(g).slice(0,e)}async function ee(){return O({sort:"latest",pageSize:100})}async function te(){const e=await u("/users/me/dashboard");return F(e)}async function ne({name:e,phone:t}){return u("/users/me",{method:"PATCH",body:{name:e,phone:t}})}async function oe({oldPassword:e,newPassword:t,newPasswordConfirm:n}){return u("/users/me/password",{method:"POST",body:{old_password:e,new_password:t,new_password_confirm:n}})}async function re(){const e=await u("/users/me/wishlist");return Array.isArray(e)?e.map(m):[]}async function se(e){const t=await u("/users/me/wishlist",{method:"POST",body:{product_id:e}});return m(t||{})}async function ie(e){return u(`/users/me/wishlist/${e}`,{method:"DELETE"})}async function ae(e){return u("/users/me/recent-products",{method:"POST",body:{product_id:e}})}async function ue({title:e,content:t}){return u("/users/me/inquiries",{method:"POST",body:{title:e,content:t}})}async function ce({productId:e,score:t,title:n,content:o,images:r=[]}){const s=new FormData;s.append("product_id",String(e)),s.append("score",String(t)),s.append("title",n||""),s.append("content",o||""),r.forEach(i=>{s.append("images",i)});const c=await u("/reviews",{method:"POST",body:s,isForm:!0});return g(c)}function le(){return x(l.user,null)}function P(){return b()}function U(){return!!P()?.access}async function de({email:e,password:t}){const n=await H({email:e,password:t}),o=n?.tokens||null,r=n?.user||null;return N(o),d(l.user,r),r}async function W(){const e=P()?.refresh;try{e&&await J({refresh:e})}catch{}B()}function B(){y(),d(l.user,null)}async function pe(){if(!U())return null;try{const e=await j();return d(l.user,e),e}catch{return B(),null}}const G="../dist/assets/logo/main_logo.svg",v=["/dist/assets/logo/main_logo.svg","dist/assets/logo/main_logo.svg"];function me({showCart:e=!0,currentNav:t=""}={}){const n=document.getElementById("siteHeaderMount");if(!n)return{accountLink:null,logoutBtn:null,cartCount:null};n.innerHTML=`
    <header class="site-header">
      <div class="site-header-top">
        <a class="brand" href="/pages/home.html">
          <img src="${G}" alt="소살리토" class="brand-logo" />
          <div>
            <h1>소살리토</h1>
            <p>러너를 위한 웰니스 브랜드</p>
          </div>
        </a>
        <div class="header-actions">
          <div class="header-account">
            <a class="text-btn" href="/pages/login.html" id="accountLink">로그인</a>
            <button class="icon-btn header-logout-btn" id="logoutBtn" type="button" hidden>로그아웃</button>
          </div>
          ${e?`<a class="icon-btn cart-link" href="/pages/cart.html" aria-label="장바구니">
                   <svg class="cart-svg" viewBox="0 0 24 24" aria-hidden="true">
                     <path d="M3 4h2l2.4 10.2a1 1 0 0 0 1 .8h8.9a1 1 0 0 0 1-.8L20 7H7" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                     <circle cx="10" cy="19" r="1.6" fill="currentColor"/>
                     <circle cx="17" cy="19" r="1.6" fill="currentColor"/>
                   </svg>
                   <span class="cart-link-label">장바구니</span>
                   <span class="count" id="cartCount">0</span>
                 </a>`:""}
        </div>
      </div>
      <div class="site-anchor-nav-wrap">
        <nav class="site-anchor-nav">
          <a href="/pages/home.html" class="${t==="home"?"active":""}">홈</a>
          <a href="/pages/brand.html" class="${t==="brand"?"active":""}">브랜드</a>
          <a href="/pages/shop.html" class="${t==="shop"?"active":""}">쇼핑</a>
          <a href="/pages/reviews.html" class="${t==="review"?"active":""}">리뷰</a>
        </nav>
      </div>
    </header>
  `;const o=n.querySelector(".brand-logo");if(o){let s=0;o.addEventListener("error",()=>{s>=v.length||(o.src=v[s],s+=1)})}const r=n.querySelector("#logoutBtn");return r&&r.addEventListener("click",async()=>{try{await W()}catch(s){console.error(s)}finally{location.href="/pages/home.html"}}),{accountLink:n.querySelector("#accountLink"),logoutBtn:r,cartCount:n.querySelector("#cartCount")}}function fe(e,{userName:t=null,isAdmin:n=!1,cartCountValue:o=null}={}){e.accountLink&&(t?(e.accountLink.textContent="마이페이지",e.accountLink.href="/pages/mypage.html"):(e.accountLink.textContent="로그인",e.accountLink.href="/pages/login.html")),e.logoutBtn&&(e.logoutBtn.hidden=!t),e.cartCount&&typeof o=="number"&&(e.cartCount.textContent=o)}function he(){const e=document.getElementById("siteFooterMount");e&&(e.innerHTML=`
    <footer class="site-footer">
      <div class="site-footer-inner">
        <nav class="site-footer-links">
          <a href="/pages/privacy.html">개인정보처리방침</a>
          <a href="/pages/terms.html">이용약관</a>
          <a href="/pages/guide.html">이용안내</a>
        </nav>
        <div class="site-footer-info">
          <p><strong>상호</strong> 주식회사 네로</p>
          <p><strong>대표</strong> 한동균, 박호연</p>
          <p><strong>사업자등록번호</strong> 123-45-67890</p>
          <p><strong>통신판매업신고</strong> 2026-서울마포-0001</p>
          <p><strong>주소</strong> 서울특별시 중구 퇴계로36길 2</p>
          <p><strong>고객센터</strong> 1588-1234 (평일 10:00 - 18:00 / 점심 12:30 - 13:30)</p>
          <p><strong>이메일</strong> cs@nero.ai.kr</p>
        </div>
        <p class="site-footer-copy">Copyright © Nero Inc. All rights reserved.</p>
      </div>
    </footer>
  `)}export{he as a,V as b,w as c,fe as d,ee as e,Y as f,le as g,ce as h,se as i,Q as j,X as k,Z as l,me as m,re as n,de as o,oe as p,W as q,ie as r,pe as s,ae as t,ne as u,ue as v,te as w,U as x,u as y};
