import{n as i,o as e}from"./footer-D65fayHX.js";function o(){return{id:null,items:[],subtotal:0,shipping:0,total:0}}function u(t={}){const r=t.product||{},n=t.option||null;return{id:t.id,quantity:Number(t.quantity||0),lineTotal:Number(t.line_total||0),product:{id:r.id,name:r.name||"",price:Number(r.price||0),image:r.image||""},option:n?{id:n.id,name:n.name||"",price:Number(n.price||0)}:null}}function c(t={}){return{id:t.id||null,items:Array.isArray(t.items)?t.items.map(u):[],subtotal:Number(t.subtotal||0),shipping:Number(t.shipping||0),total:Number(t.total||0)}}async function a(){if(!i())return o();const t=await e("/cart");return c(t)}async function d(t,r=1,n=null){if(!i())throw new Error("로그인이 필요합니다.");return await e("/cart/items",{method:"POST",body:{product_id:t,option_id:n,quantity:r}}),a()}async function p(t,r){if(!i())throw new Error("로그인이 필요합니다.");return r<=0?(await s(t),a()):(await e(`/cart/items/${t}`,{method:"PATCH",body:{quantity:r}}),a())}async function s(t){if(!i())throw new Error("로그인이 필요합니다.");return await e(`/cart/items/${t}`,{method:"DELETE"}),a()}async function l(){return i()?(await a()).items.reduce((r,n)=>r+n.quantity,0):0}export{d as a,l as c,a as f,s as r,p as u};
